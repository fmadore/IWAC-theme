// ==========================================================================
// Color System
// HSL-based with CSS custom properties for light/dark theme support
// ==========================================================================

// ==========================================================================
// Light Theme (Default)
// ==========================================================================
:root {
  color-scheme: light;

  // Primary color (IWAC orange) - HSL base
  --primary-hue: 24;
  --primary-sat: 90%;
  --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 50%);
  --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 45%);
  --primary-active: hsl(var(--primary-hue), var(--primary-sat), 40%);

  // Semantic ink colors (text) - with HSL components for derived colors
  // Warm neutral base (shifted from cool 220 to warm 215 with reduced saturation)
  --ink-hue: 215;
  --ink-sat: 20%;
  --ink-lum: 12%;
  --ink: hsl(var(--ink-hue) var(--ink-sat) var(--ink-lum));
  --ink-light: hsl(210, 14%, 34%);
  --muted: hsl(200, 10%, 48%);

  // Pure colors for overlays
  --white: #fff;
  --black: #000;

  // Surface colors (backgrounds) - warm neutral undertone
  // Shifted from cool blue (210) to warm neutral (40-45) with low saturation
  --surface: hsl(40, 20%, 99%);
  --surface-raised: hsl(38, 18%, 97%);
  --surface-overlay: color-mix(in srgb, hsl(40, 15%, 99%) 94%, transparent);
  --background: hsl(40, 15%, 95.5%);

  // Border colors - warm gray
  --border: hsl(35, 12%, 85%);
  --border-light: hsl(35, 10%, 91%);

  // Semantic colors
  --accent: var(--primary);
  --focus-color: var(--primary);
  --focus-ring: color-mix(in srgb, hsl(var(--primary-hue), var(--primary-sat), 49%) 25%, transparent);
  --selection-bg: color-mix(in srgb, hsl(var(--primary-hue), var(--primary-sat), 49%) 15%, transparent);

  // Semantic aliases for text and backgrounds
  --text-primary: var(--ink);
  --text-heading: var(--ink);
  --text-secondary: var(--muted);
  --bg-body: var(--background);
  --bg-surface: var(--surface);
  --bg-muted: var(--surface-raised);
  --bg-elevated: var(--surface);
  --border-color: var(--border);
  --primary-contrast: white;

  // Status colors (for alerts, validation, etc.)
  --success: hsl(152, 45%, 52%);
  --success-bg: hsl(152, 45%, 95%);
  --warning: hsl(22, 100%, 50%);
  --warning-bg: hsl(22, 100%, 95%);
  --error: hsl(355, 90%, 47%);
  --error-bg: hsl(355, 90%, 96%);
  --info: hsl(210, 75%, 52%);
  --info-bg: hsl(210, 75%, 95%);

  // Blockquote theming
  --blockquote-bg: color-mix(in srgb, var(--surface-raised) 88%, var(--primary) 12%);
  --blockquote-border: color-mix(in srgb, var(--primary) 60%, var(--border) 40%);
  --blockquote-quote: color-mix(in srgb, var(--primary) 80%, var(--ink) 20%);

  // Footer theme - warm dark tones to complement light theme
  --footer-surface: hsl(25, 18%, 18%);
  --footer-surface-alt: hsl(25, 20%, 14%);
  --footer-divider: hsl(25, 14%, 30%);
  --footer-text: hsl(40, 15%, 96%);
  --footer-text-muted: hsl(35, 12%, 78%);
  --footer-glow: color-mix(in srgb, hsl(var(--primary-hue), 70%, 60%) 22%, transparent);
}

// ==========================================================================
// Dark Theme - System Preference
// ==========================================================================
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    color-scheme: dark;

    --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 55%);
    --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 60%);
    --primary-active: hsl(var(--primary-hue), var(--primary-sat), 39%);

    // Ink colors for dark theme - with HSL components
    --ink-hue: 210;
    --ink-sat: 25%;
    --ink-lum: 96%;
    --ink: hsl(var(--ink-hue) var(--ink-sat) var(--ink-lum));
    --ink-light: hsl(210, 15%, 75%);
    --muted: hsl(215, 12%, 65%);

    --surface: hsl(220, 18%, 12%);
    --surface-raised: hsl(220, 16%, 14%);
    --surface-overlay: color-mix(in srgb, hsl(220, 18%, 12%) 95%, transparent);
    --background: hsl(220, 20%, 9%);

    --border: hsl(220, 12%, 22%);
    --border-light: hsl(220, 12%, 18%);

    // Semantic aliases for text and backgrounds
    --text-primary: var(--ink);
    --text-heading: var(--ink);
    --text-secondary: var(--muted);
    --bg-body: var(--background);
    --bg-surface: var(--surface);
    --bg-muted: var(--surface-raised);
    --bg-elevated: var(--surface-raised);
    --border-color: var(--border);
    --primary-contrast: white;

    // Status colors (adjusted for dark backgrounds)
    --success: hsl(152, 50%, 55%);
    --success-bg: color-mix(in srgb, hsl(152, 45%, 40%) 20%, transparent);
    --warning: hsl(22, 100%, 58%);
    --warning-bg: color-mix(in srgb, hsl(22, 90%, 45%) 20%, transparent);
    --error: hsl(355, 85%, 58%);
    --error-bg: color-mix(in srgb, hsl(355, 80%, 45%) 20%, transparent);
    --info: hsl(210, 80%, 60%);
    --info-bg: color-mix(in srgb, hsl(210, 70%, 45%) 20%, transparent);

    --blockquote-bg: color-mix(in srgb, var(--surface-raised) 76%, var(--primary) 24%);
    --blockquote-border: color-mix(in srgb, var(--primary) 68%, var(--ink) 32%);
    --blockquote-quote: color-mix(in srgb, var(--primary) 75%, white 25%);

    --footer-surface: color-mix(in srgb, var(--surface) 80%, black 20%);
    --footer-surface-alt: color-mix(in srgb, var(--surface) 70%, black 30%);
    --footer-divider: color-mix(in srgb, var(--border) 85%, var(--ink) 15%);
    --footer-text: var(--ink);
    --footer-text-muted: var(--ink-light);
    --footer-glow: color-mix(in srgb, hsl(var(--primary-hue), var(--primary-sat), 55%) 28%, transparent);
  }
}

// ==========================================================================
// Dark Theme - Manual Toggle
// ==========================================================================
body[data-theme="dark"] {
  color-scheme: dark;

  --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 55%);
  --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 60%);
  --primary-active: hsl(var(--primary-hue), var(--primary-sat), 39%);

  --ink: hsl(210, 25%, 96%);
  --ink-light: hsl(210, 15%, 75%);
  --muted: hsl(215, 12%, 65%);

  --surface: hsl(220, 18%, 12%);
  --surface-raised: hsl(220, 16%, 14%);
  --surface-overlay: color-mix(in srgb, hsl(220, 18%, 12%) 95%, transparent);
  --background: hsl(220, 20%, 9%);

  --border: hsl(220, 12%, 22%);
  --border-light: hsl(220, 12%, 18%);

  // Semantic aliases for text and backgrounds
  --text-primary: var(--ink);
  --text-heading: var(--ink);
  --text-secondary: var(--muted);
  --bg-body: var(--background);
  --bg-surface: var(--surface);
  --bg-muted: var(--surface-raised);
  --bg-elevated: var(--surface-raised);
  --border-color: var(--border);
  --primary-contrast: white;

  // Status colors (adjusted for dark backgrounds)
  --success: hsl(152, 50%, 55%);
  --success-bg: color-mix(in srgb, hsl(152, 45%, 40%) 20%, transparent);
  --warning: hsl(22, 100%, 58%);
  --warning-bg: color-mix(in srgb, hsl(22, 90%, 45%) 20%, transparent);
  --error: hsl(355, 85%, 58%);
  --error-bg: color-mix(in srgb, hsl(355, 80%, 45%) 20%, transparent);
  --info: hsl(210, 80%, 60%);
  --info-bg: color-mix(in srgb, hsl(210, 70%, 45%) 20%, transparent);

  --blockquote-bg: color-mix(in srgb, var(--surface-raised) 76%, var(--primary) 24%);
  --blockquote-border: color-mix(in srgb, var(--primary) 68%, var(--ink) 32%);
  --blockquote-quote: color-mix(in srgb, var(--primary) 75%, white 25%);

  --footer-surface: color-mix(in srgb, var(--surface) 80%, black 20%);
  --footer-surface-alt: color-mix(in srgb, var(--surface) 70%, black 30%);
  --footer-divider: color-mix(in srgb, var(--border) 85%, var(--ink) 15%);
  --footer-text: var(--ink);
  --footer-text-muted: var(--ink-light);
  --footer-glow: color-mix(in srgb, hsl(var(--primary-hue), var(--primary-sat), 55%) 28%, transparent);
}

// ==========================================================================
// Light Theme - Manual Toggle (override system dark preference)
// ==========================================================================
body[data-theme="light"] {
  color-scheme: light;

  --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 12%), 52%);
  --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 12%), 47%);
  --primary-active: hsl(var(--primary-hue), var(--primary-sat), 42%);

  // Warm neutral ink colors
  --ink: hsl(215, 20%, 14%);
  --ink-light: hsl(210, 14%, 36%);
  --muted: hsl(200, 10%, 50%);

  // Warm neutral surfaces
  --surface: hsl(40, 20%, 99%);
  --surface-raised: hsl(38, 18%, 97%);
  --surface-overlay: color-mix(in srgb, hsl(40, 15%, 99%) 94%, transparent);
  --background: hsl(40, 15%, 95.5%);

  // Warm gray borders
  --border: hsl(35, 12%, 85%);
  --border-light: hsl(35, 10%, 91%);

  // Semantic aliases for text and backgrounds
  --text-primary: var(--ink);
  --text-heading: var(--ink);
  --bg-surface: var(--surface);
  --bg-muted: var(--surface-raised);
  --border-color: var(--border);

  --blockquote-bg: color-mix(in srgb, var(--surface-raised) 88%, var(--primary) 12%);
  --blockquote-border: color-mix(in srgb, var(--primary) 60%, var(--border) 40%);
  --blockquote-quote: color-mix(in srgb, var(--primary) 80%, var(--ink) 20%);

  // Footer remains dark for contrast
  --footer-surface: hsl(25, 18%, 18%);
  --footer-surface-alt: hsl(25, 20%, 14%);
  --footer-divider: hsl(25, 14%, 30%);
  --footer-text: hsl(40, 15%, 96%);
  --footer-text-muted: hsl(35, 12%, 78%);
  --footer-glow: color-mix(in srgb, hsl(var(--primary-hue), 70%, 60%) 22%, transparent);
}