// ==========================================================================
// Color System
// HSL-based with CSS custom properties for light/dark theme support
// ==========================================================================

// ==========================================================================
// Light Theme (Default)
// ==========================================================================
:root {
  color-scheme: light;

  // Primary color (IWAC orange) - HSL base
  --primary-hue: 28;
  --primary-sat: 86%;
  --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 12%), 52%);
  --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 12%), 47%);
  --primary-active: hsl(var(--primary-hue), var(--primary-sat), 42%);

  // Semantic ink colors (text)
  --ink: hsl(222, 24%, 14%);
  --ink-light: hsl(222, 18%, 36%);
  --muted: hsl(222, 14%, 52%);

  // Surface colors (backgrounds)
  --surface: hsl(0, 0%, 100%);
  --surface-raised: hsl(210, 33%, 97%);
  --surface-overlay: hsla(0, 0%, 100%, 0.94);
  --background: hsl(210, 40%, 96%);

  // Border colors
  --border: hsl(210, 24%, 86%);
  --border-light: hsl(210, 24%, 92%);

  // Semantic colors
  --accent: var(--primary);
  --focus-color: var(--primary);
  --focus-ring: hsla(var(--primary-hue), var(--primary-sat), 49%, 0.25);
  --selection-bg: hsla(var(--primary-hue), var(--primary-sat), 49%, 0.15);

  // Semantic aliases for text and backgrounds
  --text-primary: var(--ink);
  --text-heading: var(--ink);
  --text-secondary: var(--muted);
  --bg-body: var(--background);
  --bg-surface: var(--surface);
  --bg-muted: var(--surface-raised);
  --bg-elevated: var(--surface);
  --border-color: var(--border);
  --primary-contrast: white;

  // Status colors (for alerts, validation, etc.)
  --success: hsl(152, 45%, 52%);
  --success-bg: hsl(152, 45%, 95%);
  --warning: hsl(22, 100%, 50%);
  --warning-bg: hsl(22, 100%, 95%);
  --error: hsl(355, 90%, 47%);
  --error-bg: hsl(355, 90%, 96%);
  --info: hsl(210, 75%, 52%);
  --info-bg: hsl(210, 75%, 95%);

  // Blockquote theming
  --blockquote-bg: color-mix(in srgb, var(--surface-raised) 88%, var(--primary) 12%);
  --blockquote-border: color-mix(in srgb, var(--primary) 60%, var(--border) 40%);
  --blockquote-quote: color-mix(in srgb, var(--primary) 80%, var(--ink) 20%);

  // Footer theme
  --footer-surface: hsl(214, 32%, 17%);
  --footer-surface-alt: hsl(214, 32%, 14%);
  --footer-divider: hsl(214, 28%, 30%);
  --footer-text: hsl(210, 20%, 96%);
  --footer-text-muted: hsl(214, 22%, 80%);
  --footer-glow: hsla(var(--primary-hue), 70%, 60%, 0.22);
}

// ==========================================================================
// Dark Theme - System Preference
// ==========================================================================
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]) {
    color-scheme: dark;

    --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 55%);
    --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 60%);
    --primary-active: hsl(var(--primary-hue), var(--primary-sat), 39%);

    --ink: hsl(210, 25%, 96%);
    --ink-light: hsl(210, 15%, 75%);
    --muted: hsl(215, 12%, 65%);

    --surface: hsl(220, 18%, 12%);
    --surface-raised: hsl(220, 16%, 14%);
    --surface-overlay: hsla(220, 18%, 12%, 0.95);
    --background: hsl(220, 20%, 9%);

    --border: hsl(220, 12%, 22%);
    --border-light: hsl(220, 12%, 18%);

    // Semantic aliases for text and backgrounds
    --text-primary: var(--ink);
    --text-heading: var(--ink);
    --text-secondary: var(--muted);
    --bg-body: var(--background);
    --bg-surface: var(--surface);
    --bg-muted: var(--surface-raised);
    --bg-elevated: var(--surface-raised);
    --border-color: var(--border);
    --primary-contrast: white;

    // Status colors (adjusted for dark backgrounds)
    --success: hsl(152, 50%, 55%);
    --success-bg: hsla(152, 45%, 40%, 0.2);
    --warning: hsl(22, 100%, 58%);
    --warning-bg: hsla(22, 90%, 45%, 0.2);
    --error: hsl(355, 85%, 58%);
    --error-bg: hsla(355, 80%, 45%, 0.2);
    --info: hsl(210, 80%, 60%);
    --info-bg: hsla(210, 70%, 45%, 0.2);

    --blockquote-bg: color-mix(in srgb, var(--surface-raised) 76%, var(--primary) 24%);
    --blockquote-border: color-mix(in srgb, var(--primary) 68%, var(--ink) 32%);
    --blockquote-quote: color-mix(in srgb, var(--primary) 75%, white 25%);

    --footer-surface: color-mix(in srgb, var(--surface) 80%, black 20%);
    --footer-surface-alt: color-mix(in srgb, var(--surface) 70%, black 30%);
    --footer-divider: color-mix(in srgb, var(--border) 85%, var(--ink) 15%);
    --footer-text: var(--ink);
    --footer-text-muted: var(--ink-light);
    --footer-glow: hsla(var(--primary-hue), var(--primary-sat), 55%, 0.28);
  }
}

// ==========================================================================
// Dark Theme - Manual Toggle
// ==========================================================================
body[data-theme="dark"] {
  color-scheme: dark;

  --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 55%);
  --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 10%), 60%);
  --primary-active: hsl(var(--primary-hue), var(--primary-sat), 39%);

  --ink: hsl(210, 25%, 96%);
  --ink-light: hsl(210, 15%, 75%);
  --muted: hsl(215, 12%, 65%);

  --surface: hsl(220, 18%, 12%);
  --surface-raised: hsl(220, 16%, 14%);
  --surface-overlay: hsla(220, 18%, 12%, 0.95);
  --background: hsl(220, 20%, 9%);

  --border: hsl(220, 12%, 22%);
  --border-light: hsl(220, 12%, 18%);

  // Semantic aliases for text and backgrounds
  --text-primary: var(--ink);
  --text-heading: var(--ink);
  --text-secondary: var(--muted);
  --bg-body: var(--background);
  --bg-surface: var(--surface);
  --bg-muted: var(--surface-raised);
  --bg-elevated: var(--surface-raised);
  --border-color: var(--border);
  --primary-contrast: white;

  // Status colors (adjusted for dark backgrounds)
  --success: hsl(152, 50%, 55%);
  --success-bg: hsla(152, 45%, 40%, 0.2);
  --warning: hsl(22, 100%, 58%);
  --warning-bg: hsla(22, 90%, 45%, 0.2);
  --error: hsl(355, 85%, 58%);
  --error-bg: hsla(355, 80%, 45%, 0.2);
  --info: hsl(210, 80%, 60%);
  --info-bg: hsla(210, 70%, 45%, 0.2);

  --blockquote-bg: color-mix(in srgb, var(--surface-raised) 76%, var(--primary) 24%);
  --blockquote-border: color-mix(in srgb, var(--primary) 68%, var(--ink) 32%);
  --blockquote-quote: color-mix(in srgb, var(--primary) 75%, white 25%);

  --footer-surface: color-mix(in srgb, var(--surface) 80%, black 20%);
  --footer-surface-alt: color-mix(in srgb, var(--surface) 70%, black 30%);
  --footer-divider: color-mix(in srgb, var(--border) 85%, var(--ink) 15%);
  --footer-text: var(--ink);
  --footer-text-muted: var(--ink-light);
  --footer-glow: hsla(var(--primary-hue), var(--primary-sat), 55%, 0.28);
}

// ==========================================================================
// Light Theme - Manual Toggle (override system dark preference)
// ==========================================================================
body[data-theme="light"] {
  color-scheme: light;

  --primary: hsl(var(--primary-hue), calc(var(--primary-sat) - 12%), 52%);
  --primary-hover: hsl(var(--primary-hue), calc(var(--primary-sat) - 12%), 47%);
  --primary-active: hsl(var(--primary-hue), var(--primary-sat), 42%);

  --ink: hsl(222, 24%, 14%);
  --ink-light: hsl(222, 18%, 36%);
  --muted: hsl(222, 14%, 52%);

  --surface: hsl(0, 0%, 100%);
  --surface-raised: hsl(210, 33%, 97%);
  --surface-overlay: hsla(0, 0%, 100%, 0.94);
  --background: hsl(210, 40%, 96%);

  --border: hsl(210, 24%, 86%);
  --border-light: hsl(210, 24%, 92%);

  // Semantic aliases for text and backgrounds
  --text-primary: var(--ink);
  --text-heading: var(--ink);
  --bg-surface: var(--surface);
  --bg-muted: var(--surface-raised);
  --border-color: var(--border);

  --blockquote-bg: color-mix(in srgb, var(--surface-raised) 88%, var(--primary) 12%);
  --blockquote-border: color-mix(in srgb, var(--primary) 60%, var(--border) 40%);
  --blockquote-quote: color-mix(in srgb, var(--primary) 80%, var(--ink) 20%);

  --footer-surface: hsl(214, 32%, 17%);
  --footer-surface-alt: hsl(214, 32%, 14%);
  --footer-divider: hsl(214, 28%, 30%);
  --footer-text: hsl(210, 20%, 96%);
  --footer-text-muted: hsl(214, 22%, 80%);
  --footer-glow: hsla(var(--primary-hue), 70%, 60%, 0.22);
}
