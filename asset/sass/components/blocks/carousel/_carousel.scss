@use "../../../abstracts/abstracts" as *;

// ==========================================================================
// Carousel Block
// Slick carousel styling with card-style slides and navigation
// ==========================================================================

.block-carousel {
    padding-inline: var(--space-12);
    margin-block-end: var(--space-xl);
    position: relative;

    // Fix for grid overflow issues
    min-width: 0;
    width: 100%;

    .slick-list {
        margin-inline: calc(var(--space-sm) * -1);
        padding-block: var(--space-md); // Room for hover lift
    }

    .slick-slide {
        padding-inline: var(--space-sm);
        height: auto; // Allow height to be determined by content

        // Card styling for the content inside the slide
        // We target the direct child div or anchor
        >div>* {
            display: block;
            background: var(--panel-bg);
            border: var(--panel-border);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-md), var(--glow-xs);
            transition:
                transform var(--transition-base),
                box-shadow var(--transition-base),
                border-color var(--transition-base);
            overflow: hidden;
            height: 100%;
            text-decoration: none;

            &:hover {
                transform: translateY(var(--lift-xs));
                box-shadow: var(--shadow-xl), var(--glow-sm);
                border-color: var(--primary);
            }

            img {
                width: 100%;
                height: 250px; // Consistent height
                object-fit: cover;
                display: block;
            }

            .caption,
            figcaption,
            .slide-caption {
                padding: var(--space-md);
                color: var(--ink);
                font-size: var(--text-sm);
                background: var(--surface);
                border-top: 1px solid var(--border-light);
            }

            // If it's just an image without container
            &.media-render {
                border: none;
                box-shadow: none;
                background: transparent;

                img {
                    border-radius: var(--radius-lg);
                    box-shadow: var(--shadow-md);
                }
            }
        }
    }

    .slick-arrow {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        z-index: 10;
        border: 1px solid var(--border);
        border-radius: var(--radius-full);
        height: 2.5rem;
        width: 2.5rem;
        background: var(--surface);
        color: var(--muted);
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all var(--transition-fast);
        padding: 0;
        box-shadow: var(--shadow-sm);

        &:hover {
            background-color: var(--primary);
            border-color: var(--primary);
            color: var(--white);
            box-shadow: var(--glow-sm);

            .slick-prev-icon,
            .slick-next-icon {
                &::before {
                    color: var(--white);
                }
            }
        }

        &:focus-visible {
            outline: 2px solid var(--focus-color);
            outline-offset: 2px;
            background-color: var(--primary);
            border-color: var(--primary);
            color: var(--white);
        }

        &.slick-next {
            inset-inline-end: 0;
        }

        &.slick-prev {
            inset-inline-start: 0;
        }

        .slick-prev-icon,
        .slick-next-icon {
            &::before {
                @include icon-mask("../img/chevron-left.svg"); // Default to left, override below
                width: var(--text-base);
                height: var(--text-base);
                line-height: 1;
                transition: background-color var(--transition-fast);
                color: inherit;
            }
        }

        .slick-prev-icon {
            &::before {
                @include icon-mask("../img/chevron-left.svg");
                content: "";
            }
        }

        .slick-next-icon {
            &::before {
                @include icon-mask("../img/chevron-right.svg");
                content: "";
            }
        }
    }

    .slick-dots {
        display: flex !important;
        justify-content: center;
        gap: var(--space-xs);
        margin-block-start: var(--space-md);
        padding: 0;
        list-style: none;

        li {
            margin: 0;
            padding: 0;

            button {
                font-size: 0;
                width: 0.625rem;
                height: 0.625rem;
                padding: 0;
                border-radius: var(--radius-full);
                background: var(--border);
                border: none;
                transition:
                    background-color var(--transition-fast),
                    transform var(--transition-fast);
                cursor: pointer;

                &:hover {
                    background: var(--primary-hover);
                }

                &:focus-visible {
                    outline: 2px solid var(--focus-color);
                    outline-offset: 2px;
                    background: var(--primary);
                }
            }

            &.slick-active button {
                background: var(--primary);
                transform: scale(1.2);
            }
        }
    }
}